<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RG Language Compiler</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/manual.css">
    <link rel="stylesheet" href="css/manual.css">
</head>
<body>
    <div class="compiler-container">
        <header class="compiler-header" role="banner">
            <div class="logo" aria-label="RG Compiler Logo">
                <i class="fas fa-code"></i>
                <h1>RG Compiler</h1>
            </div>
            <nav class="controls" role="navigation" aria-label="Main controls">
                <button id="compileBtn" class="btn compile-btn">
                    <i class="fas fa-play"></i> Run
                </button>
                <button id="clearBtn" class="btn clear-btn">
                    <i class="fas fa-trash"></i> Clear
                </button>
                <button id="sampleBtn" class="btn sample-btn">
                    <i class="fas fa-code"></i> Sample Code
                </button>
                <button id="manualBtn" class="btn manual-btn">
                    <i class="fas fa-book"></i> Manual
                </button>
            </nav>
        </header>

        <main class="main-content" role="main">
            <div class="editor-output-container">
                <div class="editor-section">
                    <div class="code-editor">
                        <div class="editor-header">
                            <div class="window-controls">
                                <span class="dot red"></span>
                                <span class="dot yellow"></span>
                                <span class="dot green"></span>
                            </div>
                            
                            <span class="file-name">main.rg</span>
                        </div>
                        <div class="editor-wrapper">
                            <div class="line-numbers"></div>
                            <textarea id="sourceCode" spellcheck="false" class="code-input" placeholder="// Enter your RG code here...">RG int x = 5;
RG int y = 10;
RG int sum = x + y;
RG_Print("The sum is:", sum);

// Control flow example
if (sum > 10) {
    RG_Print("Sum is greater than 10");
} else {
    RG_Print("Sum is 10 or less");
}</textarea>
                        </div>
                    </div>
                </div>

                <div class="output-section">
                    <div class="output-header">
                        <div class="window-controls">
                            <span class="dot red"></span>
                            <span class="dot yellow"></span>
                            <span class="dot green"></span>
                        </div>
                        <div class="output-tabs">
                            <button class="tab-btn active" data-tab="output">Output</button>
                            <button class="tab-btn" data-tab="errors">Errors</button>
                            <button class="tab-btn" data-tab="warnings">Warnings</button>
                        </div>
                    </div>
                    <div id="output" class="output-content active"></div>
                    <div id="errors" class="output-content"></div>
                    <div id="warnings" class="output-content"></div>
                </div>

                <div class="info-section">
                    <!-- Token Panel -->
                    <div class="info-panel token-panel" id="tokens">
                        <div class="panel-header">
                            <div class="window-controls">
                                <span class="dot red"></span>
                                <span class="dot yellow"></span>
                                <span class="dot green"></span>
                            </div>
                            <i class="fas fa-tags"></i>
                            <h3>Tokens</h3>
                            <div class="panel-actions">
                                <button class="panel-btn copy-btn" title="Copy to clipboard">
                                    <i class="fas fa-copy"></i>
                                </button>
                                <button class="panel-btn expand-btn" title="Expand panel">
                                    <i class="fas fa-expand"></i>
                                </button>
                            </div>
                        </div>
                        <div class="panel-toolbar">
                            <input type="text" class="panel-search" placeholder="Search tokens...">
                        </div>
                        <div class="panel-content">
                            <div class="token-line">
                                <span class="token-type">IDENTIFIER</span>
                                <span class="token-value">myVar</span>
                                <span class="token-position">Line 5, Col 12</span>
                            </div>
                            <!-- More token lines will be added dynamically -->
                        </div>
                    </div>

                    <!-- Assembly Panel -->
                    <div class="info-panel assembly-panel" id="assembly">
                        <div class="panel-header">
                            <div class="window-controls">
                                <span class="dot red"></span>
                                <span class="dot yellow"></span>
                                <span class="dot green"></span>
                            </div>
                            <i class="fas fa-microchip"></i>
                            <h3>Assembly</h3>
                            <div class="panel-actions">
                                <button class="panel-btn copy-btn" title="Copy to clipboard">
                                    <i class="fas fa-copy"></i>
                                </button>
                                <button class="panel-btn expand-btn" title="Expand panel">
                                    <i class="fas fa-expand"></i>
                                </button>
                            </div>
                        </div>
                        <div class="panel-content">
                            <div class="assembly-line">
                                <span class="assembly-address">0x0000</span>
                                <span class="assembly-opcode">MOV</span>
                                <span class="assembly-operands">EAX, 42</span>
                                <span class="assembly-comment">; Initialize counter</span>
                            </div>
                            <!-- More assembly lines will be added dynamically -->
                        </div>
                    </div>

                    <!-- Symbol Table -->
                    <div class="info-panel symbol-panel" id="symbols">
                        <div class="panel-header">
                            <div class="window-controls">
                                <span class="dot red"></span>
                                <span class="dot yellow"></span>
                                <span class="dot green"></span>
                            </div>
                            <i class="fas fa-table"></i>
                            <h3>Symbol Table</h3>
                            <div class="panel-actions">
                                <button class="panel-btn copy-btn" title="Copy to clipboard">
                                    <i class="fas fa-copy"></i>
                                </button>
                                <button class="panel-btn expand-btn" title="Expand panel">
                                    <i class="fas fa-expand"></i>
                                </button>
                            </div>
                        </div>
                        <div class="panel-content">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th class="col-type">Type</th>
                                        <th class="col-name">Name</th>
                                        <th class="col-value">Value</th>
                                        <th class="col-address">Address</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td class="col-type">int</td>
                                        <td class="col-name">counter</td>
                                        <td class="col-value">42</td>
                                        <td class="col-address">0x7ffd0012</td>
                                    </tr>
                                    <!-- More symbol rows will be added dynamically -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <div class="manual-container" id="manualPanel">
                <div class="manual-header">
                    <h2>RG Language Documentation</h2>
                    <button class="close-manual" id="closeManualBtn" aria-label="Close manual">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="manual-sidebar">
                    <ul class="manual-toc">
                        <li><a href="#introduction">Introduction</a></li>
                        <li><a href="#syntax">Basic Syntax</a></li>
                        <li><a href="#variables">Variables & Data Types</a></li>
                        <li><a href="#operators">Operators</a></li>
                        <li><a href="#control-flow">Control Flow</a></li>
                        <li><a href="#functions">Built-in Functions</a></li>
                        <li><a href="#arrays">Arrays</a></li>
                        <li><a href="#examples">Examples</a></li>
                        <li><a href="#compiler">Using the Compiler</a></li>
                    </ul>
                </div>
                <div class="manual-content">
                    <section id="introduction">
                        <h3>Introduction to RG Language</h3>
                        <p>RG is a simple, C-style programming language designed for educational purposes. It combines the simplicity of basic programming constructs with powerful mathematical functions, making it ideal for learning programming concepts and solving computational problems.</p>

                        <p>Key features of RG language:</p>
                        <ul>
                            <li>Simple, clean syntax inspired by C</li>
                            <li>Strong typing system with basic data types</li>
                            <li>Built-in mathematical functions</li>
                            <li>Support for arrays and basic data structures</li>
                            <li>Control flow statements for program logic</li>
                        </ul>

                        <p>This manual provides a comprehensive guide to the RG language syntax, features, and usage.</p>
                    </section>

                    <section id="syntax">
                        <h3>Basic Syntax</h3>
                        <p>RG programs consist of statements that end with semicolons. Comments, whitespace, and code blocks follow C-style conventions.</p>

                        <h4>Comments</h4>
                        <pre><code>// This is a single-line comment</code></pre>

                        <h4>Statements</h4>
                        <p>Each statement must end with a semicolon:</p>
                        <pre><code>RG int x = 5;
RG_Print("Hello, world!");</code></pre>

                        <h4>Code Blocks</h4>
                        <p>Code blocks are enclosed in curly braces:</p>
                        <pre><code>if (condition) {
    // Code block
    statement1;
    statement2;
}</code></pre>
                    </section>

                    <section id="variables">
                        <h3>Variables and Data Types</h3>
                        <p>All variable declarations in RG start with the <code>RG</code> keyword followed by the data type.</p>

                        <h4>Basic Data Types</h4>
                        <ul>
                            <li><code>int</code> - Integer values (e.g., 1, -5, 100)</li>
                            <li><code>float</code> - Floating-point values (e.g., 3.14, -0.5, 2.0)</li>
                            <li><code>bool</code> - Boolean values (true or false)</li>
                        </ul>

                        <h4>Variable Declaration and Initialization</h4>
                        <pre><code>// Declaration with initialization
RG int age = 25;
RG float pi = 3.14159;
RG bool isActive = true;

// Multiple variables of the same type
RG int x = 10, y = 20, z = 30;</code></pre>

                        <h4>Variable Naming Rules</h4>
                        <ul>
                            <li>Names must start with a letter or underscore</li>
                            <li>Names can contain letters, numbers, and underscores</li>
                            <li>Names are case-sensitive (age and Age are different variables)</li>
                            <li>Reserved keywords cannot be used as variable names</li>
                        </ul>
                    </section>

                    <section id="operators">
                        <h3>Operators</h3>

                        <h4>Arithmetic Operators</h4>
                        <table class="operators-table">
                            <tr>
                                <th>Operator</th>
                                <th>Description</th>
                                <th>Example</th>
                            </tr>
                            <tr>
                                <td><code>+</code></td>
                                <td>Addition</td>
                                <td><code>x + y</code></td>
                            </tr>
                            <tr>
                                <td><code>-</code></td>
                                <td>Subtraction</td>
                                <td><code>x - y</code></td>
                            </tr>
                            <tr>
                                <td><code>*</code></td>
                                <td>Multiplication</td>
                                <td><code>x * y</code></td>
                            </tr>
                            <tr>
                                <td><code>/</code></td>
                                <td>Division</td>
                                <td><code>x / y</code></td>
                            </tr>
                            <tr>
                                <td><code>%</code></td>
                                <td>Modulus (remainder)</td>
                                <td><code>x % y</code></td>
                            </tr>
                        </table>

                        <h4>Comparison Operators</h4>
                        <table class="operators-table">
                            <tr>
                                <th>Operator</th>
                                <th>Description</th>
                                <th>Example</th>
                            </tr>
                            <tr>
                                <td><code>==</code></td>
                                <td>Equal to</td>
                                <td><code>x == y</code></td>
                            </tr>
                            <tr>
                                <td><code>!=</code></td>
                                <td>Not equal to</td>
                                <td><code>x != y</code></td>
                            </tr>
                            <tr>
                                <td><code>&lt;</code></td>
                                <td>Less than</td>
                                <td><code>x &lt; y</code></td>
                            </tr>
                            <tr>
                                <td><code>&gt;</code></td>
                                <td>Greater than</td>
                                <td><code>x &gt; y</code></td>
                            </tr>
                            <tr>
                                <td><code>&lt;=</code></td>
                                <td>Less than or equal to</td>
                                <td><code>x &lt;= y</code></td>
                            </tr>
                            <tr>
                                <td><code>&gt;=</code></td>
                                <td>Greater than or equal to</td>
                                <td><code>x &gt;= y</code></td>
                            </tr>
                        </table>

                        <h4>Logical Operators</h4>
                        <table class="operators-table">
                            <tr>
                                <th>Operator</th>
                                <th>Description</th>
                                <th>Example</th>
                            </tr>
                            <tr>
                                <td><code>&&</code></td>
                                <td>Logical AND</td>
                                <td><code>x > 0 && x < 10</code></td>
                            </tr>
                            <tr>
                                <td><code>||</code></td>
                                <td>Logical OR</td>
                                <td><code>x < 0 || x > 10</code></td>
                            </tr>
                            <tr>
                                <td><code>!</code></td>
                                <td>Logical NOT</td>
                                <td><code>!isValid</code></td>
                            </tr>
                        </table>

                        <h4>Assignment Operator</h4>
                        <table class="operators-table">
                            <tr>
                                <th>Operator</th>
                                <th>Description</th>
                                <th>Example</th>
                            </tr>
                            <tr>
                                <td><code>=</code></td>
                                <td>Assign value</td>
                                <td><code>x = 5</code></td>
                            </tr>
                        </table>
                    </section>

                    <section id="control-flow">
                        <h3>Control Flow</h3>

                        <h4>If-Else Statements</h4>
                        <p>Conditional execution of code based on boolean expressions:</p>
                        <pre><code>// Simple if statement
if (x > 10) {
    RG_Print("x is greater than 10");
}

// If-else statement
if (x > 10) {
    RG_Print("x is greater than 10");
} else {
    RG_Print("x is not greater than 10");
}

// If-else if-else statement
if (x > 10) {
    RG_Print("x is greater than 10");
} else if (x < 0) {
    RG_Print("x is negative");
} else {
    RG_Print("x is between 0 and 10");
}</code></pre>

                        <h4>For Loops</h4>
                        <p>Execute code a specific number of times:</p>
                        <pre><code>// Basic for loop
for (RG int i = 0; i < 5; i = i + 1) {
    RG_Print("Iteration:", i);
}

// Nested for loops
for (RG int i = 0; i < 3; i = i + 1) {
    for (RG int j = 0; j < 3; j = j + 1) {
        RG_Print("Position:", i, j);
    }
}</code></pre>

                        <h4>While Loops</h4>
                        <p>Execute code as long as a condition is true:</p>
                        <pre><code>// Basic while loop
RG int i = 0;
while (i < 5) {
    RG_Print("Iteration:", i);
    i = i + 1;
}

// While loop with complex condition
RG int sum = 0;
RG int num = 1;
while (sum < 100) {
    sum = sum + num;
    num = num + 1;
}
RG_Print("Final sum:", sum);</code></pre>

                        <h4>Break Statement</h4>
                        <p>Exit a loop prematurely:</p>
                        <pre><code>// Break out of a loop when a condition is met
RG int i = 0;
while (i < 10) {
    if (i == 5) {
        RG_Print("Breaking at i =", i);
        break;  // Exit the loop
    }
    RG_Print("Iteration:", i);
    i = i + 1;
}</code></pre>
                    </section>

                    <section id="functions">
                        <h3>Built-in Functions</h3>
                        <p>RG provides several built-in functions for common operations:</p>

                        <h4>Output Function</h4>
                        <pre><code>// Print to output
RG_Print("Hello, world!");
RG_Print("Value of x is:", x);
RG_Print("Multiple values:", x, y, z);</code></pre>

                        <h4>Mathematical Functions</h4>
                        <table class="function-table">
                            <tr>
                                <th>Function</th>
                                <th>Description</th>
                                <th>Example</th>
                            </tr>
                            <tr>
                                <td><code>sqrt(x)</code></td>
                                <td>Square root of x</td>
                                <td><code>sqrt(16) // Returns 4.0</code></td>
                            </tr>
                            <tr>
                                <td><code>pow(x, y)</code></td>
                                <td>x raised to the power of y</td>
                                <td><code>pow(2, 3) // Returns 8.0</code></td>
                            </tr>
                            <tr>
                                <td><code>sin(x)</code></td>
                                <td>Sine of x (in radians)</td>
                                <td><code>sin(3.14159 / 2) // Returns 1.0</code></td>
                            </tr>
                            <tr>
                                <td><code>cos(x)</code></td>
                                <td>Cosine of x (in radians)</td>
                                <td><code>cos(0) // Returns 1.0</code></td>
                            </tr>
                            <tr>
                                <td><code>tan(x)</code></td>
                                <td>Tangent of x (in radians)</td>
                                <td><code>tan(3.14159 / 4) // Returns 1.0</code></td>
                            </tr>
                            <tr>
                                <td><code>log(x)</code></td>
                                <td>Natural logarithm of x</td>
                                <td><code>log(2.71828) // Returns 1.0</code></td>
                            </tr>
                            <tr>
                                <td><code>factorial(x)</code></td>
                                <td>Factorial of x</td>
                                <td><code>factorial(5) // Returns 120</code></td>
                            </tr>
                        </table>

                        <h4>Function Usage Examples</h4>
                        <pre><code>// Calculate the hypotenuse of a right triangle
RG float a = 3;
RG float b = 4;
RG float c = sqrt(pow(a, 2) + pow(b, 2));
RG_Print("Hypotenuse:", c);  // Outputs 5.0

// Calculate factorial
RG int n = 5;
RG int fact = factorial(n);
RG_Print("Factorial of", n, "is", fact);  // Outputs 120</code></pre>
                    </section>

                    <section id="arrays">
                        <h3>Arrays</h3>
                        <p>RG supports one-dimensional arrays for storing collections of values of the same type.</p>

                        <h4>Array Declaration and Initialization</h4>
                        <pre><code>// Declare an array of integers with size 5
RG int numbers[5] = 0;  // Initialize all elements to 0

// Access and modify array elements
numbers[0] = 10;
numbers[1] = 20;
numbers[2] = 30;
numbers[3] = 40;
numbers[4] = 50;</code></pre>

                        <h4>Array Operations</h4>
                        <pre><code>// Access array elements
RG int firstElement = numbers[0];
RG_Print("First element:", firstElement);

// Modify array elements
numbers[2] = numbers[0] + numbers[1];
RG_Print("Updated third element:", numbers[2]);

// Iterate through an array
for (RG int i = 0; i < 5; i = i + 1) {
    RG_Print("Element", i, ":", numbers[i]);
}</code></pre>

                        <h4>Array Manipulation Functions</h4>
                        <pre><code>// Insert a value into an array
insert(numbers, 100);   // Adds 100 to the array

// Delete an element at a specific index
delete(numbers, 2);     // Removes the element at index 2</code></pre>
                    </section>

                    <section id="examples">
                        <h3>Complete Examples</h3>

                        <h4>Example 1: Calculate Average</h4>
                        <pre><code>// Calculate the average of an array of numbers
RG int numbers[5] = 0;
RG int sum = 0;

// Initialize array with values
numbers[0] = 10;
numbers[1] = 20;
numbers[2] = 30;
numbers[3] = 40;
numbers[4] = 50;

// Calculate sum
for (RG int i = 0; i < 5; i = i + 1) {
    sum = sum + numbers[i];
}

// Calculate average
RG float average = sum / 5;
RG_Print("Average:", average);</code></pre>

                        <h4>Example 2: Fibonacci Sequence</h4>
                        <pre><code>// Generate Fibonacci sequence up to n terms
RG int n = 10;
RG int fib[10] = 0;

// Initialize first two terms
fib[0] = 0;
fib[1] = 1;

// Generate the rest of the sequence
for (RG int i = 2; i < n; i = i + 1) {
    fib[i] = fib[i-1] + fib[i-2];
}

// Print the sequence
RG_Print("Fibonacci Sequence:");
for (RG int i = 0; i < n; i = i + 1) {
    RG_Print("Term", i, ":", fib[i]);
}</code></pre>

                        <h4>Example 3: Prime Number Checker</h4>
                        <pre><code>// Check if a number is prime
RG int num = 17;
RG bool isPrime = true;

if (num <= 1) {
    isPrime = false;
} else {
    for (RG int i = 2; i < num; i = i + 1) {
        if (num % i == 0) {
            isPrime = false;
            break;
        }
    }
}

if (isPrime) {
    RG_Print(num, "is a prime number");
} else {
    RG_Print(num, "is not a prime number");
}</code></pre>
                    </section>

                    <section id="compiler">
                        <h3>Using the RG Compiler</h3>

                        <h4>Compiler Interface</h4>
                        <p>The RG compiler provides an integrated development environment with the following components:</p>
                        <ul>
                            <li><strong>Code Editor:</strong> Where you write your RG code</li>
                            <li><strong>Output Panel:</strong> Displays program output, errors, and warnings</li>
                            <li><strong>Token Panel:</strong> Shows the lexical tokens generated from your code</li>
                            <li><strong>Assembly Panel:</strong> Displays the generated assembly code</li>
                            <li><strong>Symbol Table:</strong> Lists all variables and their properties</li>
                        </ul>

                        <h4>Compilation Process</h4>
                        <ol>
                            <li><strong>Write Code:</strong> Enter your RG code in the editor</li>
                            <li><strong>Run:</strong> Click the "Run" button to compile and execute your code</li>
                            <li><strong>View Results:</strong> Check the output panel for program results</li>
                            <li><strong>Debug:</strong> If there are errors, check the errors panel for details</li>
                        </ol>

                        <h4>Compiler Features</h4>
                        <ul>
                            <li><strong>Syntax Highlighting:</strong> Code is colored for better readability</li>
                            <li><strong>Error Reporting:</strong> Detailed error messages help identify issues</li>
                            <li><strong>Line Numbers:</strong> Help locate code positions quickly</li>
                            <li><strong>Token Analysis:</strong> View the lexical structure of your code</li>
                            <li><strong>Assembly Generation:</strong> See how your code translates to assembly</li>
                        </ul>
                    </section>
                </div>
            </div>

            <div class="loading-overlay" id="loadingOverlay">
                <div class="loading-spinner"></div>
                <div class="loading-text">Compiling...</div>
            </div>

            <footer class="status-bar">
                <div class="status-item">
                    <span id="lineCol">Line 1, Col 1</span>
                </div>
                <div class="status-item">
                    <span id="fileSize">0 chars</span>
                </div>
                <div class="status-item">
                    <span id="compileStatus">Ready</span>
                </div>
            </footer>
        </main>
    </div>

    <script src="js/lexer.js"></script>
    <script src="js/parser.js"></script>
    <script src="js/semantic.js"></script>
    <script src="js/codegen.js"></script>
    <script src="js/compiler.js"></script>
</body>
</html>